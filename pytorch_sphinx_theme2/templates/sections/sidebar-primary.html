{#
  Custom sidebar-primary.html for pytorch_sphinx_theme2
  Based on pydata_sphinx_theme's sidebar-primary.html with PyTorch customizations:
  1. pytorch-site-link appears in mobile sidebar when enabled
  2. Version/version-switcher support
#}

{% block docs_sidebar %}
{% set sidebar_items = sidebars or theme_primary_sidebar_items %}
{% if theme_navbar_center or theme_navbar_end or sidebar_items or theme_primary_sidebar_end %}
  {# Header items that will be displayed in the sidebar on mobile #}
  <div class="sidebar-header-items sidebar-primary__section">
    {# Version switcher at the top of sidebar #}
    {% if theme_switcher %}
    <div class="sidebar-header-items__start">
      <div class="navbar-item">
        {% include "components/version-switcher.html" %}
      </div>
    </div>
    {% elif version %}
    <div class="sidebar-header-items__start">
      <div class="navbar-item">
        {% include "pytorch_version.html" %}
      </div>
    </div>
    {% endif %}

    {# The header center items #}
    {% if theme_navbar_center %}
      <div class="sidebar-header-items__center">
        {% for navbar_item in theme_navbar_center %}
          {#
            In the mobile sidebar we do not want a dropdown, so set a large cutoff (999).
          #}
          {% with theme_header_links_before_dropdown=999 %}
            <div class="navbar-item">{% include navbar_item %}</div>
          {% endwith %}
        {% endfor %}
      </div>
    {% endif %}
    {# The header end items #}
    {% if theme_navbar_end %}
      <div class="sidebar-header-items__end">
        {# Inject pytorch-site-link in mobile sidebar if enabled #}
        {% if theme_show_pytorch_org_link | default(true) %}
          <div class="navbar-item">{% include "pytorch-site-link.html" %}</div>
        {% endif %}
        {% for navbar_item in theme_navbar_end %}
          <div class="navbar-item">{% include navbar_item %}</div>
        {% endfor %}
      </div>
    {% endif %}
  </div>
  {% if sidebar_items %}
    <div class="sidebar-primary-items__start sidebar-primary__section">
      {%- for sidebartemplate in sidebar_items %}
        <div class="sidebar-primary-item{% if sidebartemplate == 'sidebar-collapse.html' %} pst-sidebar-collapse{% endif %}">{%- include sidebartemplate %}</div>
      {%- endfor %}
    </div>
  {% endif %}
  {# Items that will snap to the bottom of the screen #}
  <div class="sidebar-primary-items__end sidebar-primary__section">
    {%- for sidebartemplate in theme_primary_sidebar_end %}
      <div class="sidebar-primary-item">{%- include sidebartemplate %}</div>
    {%- endfor %}
  </div>
{% endif %}
{% endblock docs_sidebar %}

<div id="rtd-footer-container"></div>
